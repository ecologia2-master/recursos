---
title: "Interacciones Biol√≥gicas y Din√°mica Poblacional"
subtitle: "Ecolog√≠a II - Unidad 2"
date: "Actualizado: `r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: "%current%"
      ratio: "16:10"
    seal: true
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width = 10, 
  fig.height = 6, 
  fig.retina = 3,
  out.width = "100%",
  cache = FALSE,
  echo = FALSE,
  message = FALSE, 
  warning = FALSE,
  hiline = TRUE
)

# Cargar librer√≠as necesarias
suppressPackageStartupMessages({
  library(ggplot2)
  library(dplyr)
  library(knitr)
  library(viridis)
})

# Configurar tema por defecto
theme_set(theme_minimal())
```

```{css, echo=FALSE}
/* Configuraci√≥n b√°sica responsiva */
.remark-slide-content {
  font-size: 18px;
  line-height: 1.4;
  padding: 1em 2em 1em 2em;
  overflow: hidden;
}

/* Tama√±os de encabezados */
.remark-slide-content h1 { font-size: 2.2em; margin-bottom: 0.5em; }
.remark-slide-content h2 { font-size: 1.6em; margin-bottom: 0.4em; }
.remark-slide-content h3 { font-size: 1.3em; margin-bottom: 0.3em; }

/* Ajustar m√°rgenes */
.remark-slide-content p { margin-bottom: 0.8em; }
.remark-slide-content ul { margin-bottom: 0.5em; }
.remark-slide-content li { margin-bottom: 0.3em; }

/* Slide de t√≠tulo */
.title-slide {
  background-image: url('https://images.unsplash.com/photo-1566133781231-71f63aed1b71?ixlib=rb-4.0.3');
  background-size: cover;
  background-position: center;
}

.title-slide .remark-slide-content {
  background: rgba(0, 0, 0, 0.7);
  color: white;
}

/* Clases de tama√±o */
.large { font-size: 1.4em; }
.medium { font-size: 1.1em; }
.small { font-size: 0.9em; }
.tiny { font-size: 0.8em; }
.micro { font-size: 0.7em; }

/* Colores */
.green { color: #2E8B57; }
.blue { color: #4169E1; }
.red { color: #DC143C; }
.orange { color: #FF8C00; }
.purple { color: #8B5A96; }

.highlight {
  background-color: #ffff99;
  padding: 1px 3px;
  border-radius: 3px;
}

/* Cajas estilizadas */
.box {
  background-color: #f0f8ff;
  border: 2px solid #4169E1;
  border-radius: 8px;
  padding: 0.8em;
  margin: 0.5em 0;
  font-size: 0.95em;
}

.equation {
  background-color: #f5f5f5;
  border-left: 4px solid #2E8B57;
  padding: 0.8em;
  margin: 0.5em 0;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.pull-left, .pull-right {
  box-sizing: border-box;   /* incluye padding y border en el width */
}

/* Columnas con estilo */
.pull-left { 
  float: left; 
  width: 47%; 
  padding: 0.8em;
  margin-right: 2%;
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  border: 1px solid #dee2e6;
  border-radius: 8px;
  border-left: 4px solid #2E8B57;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 0.85em;
}

.pull-right { 
  float: right; 
  width: 47%; 
  padding: 0.8em;
  margin-left: 2%;
  background: linear-gradient(135deg, #fff5f5, #fed7d7);
  border: 1px solid #feb2b2;
  border-radius: 8px;
  border-left: 4px solid #4169E1;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 0.85em;
}

/* Responsive */
@media screen and (max-width: 1024px) {
  .remark-slide-content { font-size: 16px; }
  .pull-left, .pull-right { 
    width: 100%; 
    float: none; 
    margin: 0.5em 0;
    font-size: 0.8em;
  }
}

/* Ajustes para modo presentaci√≥n */
@media screen and (min-width: 1400px) {
  .remark-slide-content { 
    font-size: 20px; 
    padding: 2em 3em;
  }
}

/* Espaciado compacto */
.compact { margin: 0.2em 0; }
.tight { line-height: 1.2; }

.compact .remark-slide-content{
  /* menos relleno arriba/abajo de la slide */
  padding-top: 8px;
  padding-bottom: 8px;
}
/* T√≠tulos m√°s pegados al contenido */
.compact h1, .compact h2, .compact h3{
  margin-top: 0.15em;
  margin-bottom: 0.25em;
}
/* P√°rrafos y listas con menos interl√≠nea y m√°rgenes */
.compact p, .compact li{
  line-height: 1.15;
  margin: 0.15em 0 0.15em 0;
}
/* Columas .pull-* sin ‚Äúrespiro‚Äù extra */
.compact .pull-left, .compact .pull-right{
  margin-top: 0.1em;
}
/* Im√°genes sin m√°rgenes adicionales */
.compact img{
  margin: 0;
  padding: 0;
  display: block;
}
/* Cuando una imagen va dentro de un <li>, no metas aire extra */
.compact li > img{
  margin: 0.1em 0 0.25em 0;
}
```

---
class: title-slide, center, middle

# .large[üîó Interacciones Biol√≥gicas y Din√°mica Poblacional]

## .medium[Estrategias de Vida, Competencia, Depredaci√≥n y Coevoluci√≥n]

### `r format(Sys.Date(), "%d de %B, %Y")`

---

# üìã Agenda de la Conferencia 

.box[
##  - Estrategias de Vida 
- Ciclos de vida y estrategias reproductivas r y K

##  - Competencia 
- Interespec√≠fica e intraespec√≠fica, exclusi√≥n y coexistencia

##  - Depredaci√≥n y Otros 
- Modelo Lotka-Volterra, mutualismo, comensalismo, parasitismo

##  - Din√°micas Espaciales y Temporales 
- Migraci√≥n, dispersi√≥n, sucesi√≥n ecol√≥gica, redes tr√≥ficas
]

---
class: inverse, center, middle

# üå± BLOQUE 1
# Estrategias de Vida y Ciclos Reproductivos

---

# üîÑ Estrategias Reproductivas: Teor√≠a r-K

## .blue[Conceptos Fundamentales]

.box[
**Teor√≠a propuesta por MacArthur y Wilson (1967)**

Las especies evolucionan hacia una de dos estrategias extremas seg√∫n las presiones selectivas del ambiente:
- **Selecci√≥n r:** Ambientes impredecibles, alta mortalidad
- **Selecci√≥n K:** Ambientes estables, cerca de la capacidad de carga
]
---
## Estrategias Reproductivas: Teor√≠a r-K

```{r r_k_comparison, fig.height=5}
# Crear datos comparativos para estrategias r y K
traits <- c("Tama√±o corporal", "Longevidad", "Edad reproductiva", 
           "Tama√±o camada", "Cuidado parental", "Tasa mortalidad",
           "Desarrollo", "Competencia")

r_values <- c(1, 1, 1, 5, 1, 5, 5, 2)
K_values <- c(5, 5, 4, 1, 5, 1, 1, 5)

rk_data <- data.frame(
  trait = rep(traits, 2),
  value = c(r_values, K_values),
  strategy = rep(c("Estrategia r", "Estrategia K"), each = length(traits))
)

rk_data$trait <- factor(rk_data$trait, levels = rev(traits))

ggplot(rk_data, aes(x = trait, y = value, fill = strategy)) +
  geom_col(position = "dodge", alpha = 0.8) +
  coord_flip() +
  scale_fill_manual(values = c("#FF6B6B", "#4ECDC4")) +
  scale_y_continuous(breaks = 1:5, 
                     labels = c("Muy bajo", "Bajo", "Medio", "Alto", "Muy alto")) +
  theme_minimal() +
  theme(legend.position = "top",
        legend.title = element_blank(),
        plot.title = element_text(size = 14, face = "bold", hjust = 0.5)) +
  labs(title = "Comparaci√≥n de Estrategias Reproductivas r vs K",
       x = "Caracter√≠sticas de Historia de Vida",
       y = "Nivel de la Caracter√≠stica")
```

---
class: compact

# üêÅ Estrategia r: Especialistas en Reproducci√≥n

## .blue[Caracter√≠sticas T√≠picas]

.pull-left[
### **Historia de Vida**
- **Madurez temprana:** 2-6 meses
- **Reproducci√≥n r√°pida:** M√∫ltiples camadas/a√±o
- **Descendencia numerosa:** 5-15 cr√≠as
- **Vida corta:** 1-3 a√±os
- **Crecimiento r√°pido**

### **Adaptaciones**
- **Peque√±o tama√±o corporal**
- **M√≠nimo cuidado parental**
- **Desarrollo acelerado**
- **Alta dispersi√≥n**
- **Tolerancia a perturbaciones**
]

.pull-right[
### **Ambientes Favorables**
- **Inestables/impredecibles**
- **Frecuentes perturbaciones**
- **Recursos temporalmente abundantes**
- **Baja competencia interespec√≠fica**
- **Alta mortalidad juvenil**

### **Ventajas Evolutivas**
- **Colonizaci√≥n r√°pida**
- **Recuperaci√≥n post-perturbaci√≥n**
- **Explotaci√≥n de recursos ef√≠meros**
- **Escape de enemigos naturales**
]

.box[
### üîç **Ejemplo Dominicano: Rata Noruega (*Rattus norvegicus*)**
- **Madurez:** 5-6 semanas ‚Ä¢ **Gestaci√≥n:** 21 d√≠as ‚Ä¢ **Camadas:** 4-6/a√±o
- **Cr√≠as/camada:** 6-12 ‚Ä¢ **Longevidad:** 2-3 a√±os ‚Ä¢ **Peso:** 200-500g
- **H√°bitat:** Ambientes perturbados, urbanos, costeros
]

---
class: compact

# üêò Estrategia K: Especialistas en Competencia

## .blue[Caracter√≠sticas T√≠picas]

.pull-left[
### **Historia de Vida**
- **Madurez tard√≠a:** 5-20 a√±os
- **Reproducci√≥n lenta:** 1 cr√≠a cada 2-5 a√±os
- **Descendencia escasa:** 1-3 cr√≠as
- **Vida larga:** 30-100+ a√±os
- **Crecimiento lento y sostenido**

### **Adaptaciones**
- **Gran tama√±o corporal**
- **Cuidado parental intensivo**
- **Desarrollo prolongado**
- **Baja dispersi√≥n**
- **Especializaci√≥n ecol√≥gica**
]

.pull-right[
### **Ambientes Favorables**
- **Estables/predecibles**
- **Cerca de capacidad de carga**
- **Alta competencia interespec√≠fica**
- **Recursos limitados pero constantes**
- **Baja mortalidad adulta**

### **Ventajas Evolutivas**
- **Eficiencia competitiva**
- **Uso optimal de recursos**
- **Supervivencia en ambientes saturados**
- **Inversi√≥n en calidad vs cantidad**
]

.box[
### üîç **Ejemplo Dominicano: Manat√≠ Antillano (*Trichechus manatus*)**
- **Madurez:** 5-9 a√±os ‚Ä¢ **Gestaci√≥n:** 12-13 meses ‚Ä¢ **Cr√≠as:** 1 cada 3-5 a√±os
- **Cuidado parental:** 1-2 a√±os ‚Ä¢ **Longevidad:** 50-60 a√±os ‚Ä¢ **Peso:** 200-600 kg
- **H√°bitat:** Aguas costeras estables, manglares protegidos
]

---

# üéØ Continuo r-K: Especies Intermedias

## .blue[La Realidad es M√°s Compleja]

```{r rk_continuum, fig.height=3}

# Crear datos para mostrar el continuo r-K CORREGIDO
species_data <- data.frame(
  species = c("Mosquito *Aedes*", "Rata noruega", "Iguana verde", 
              "Lechuza", "Jut√≠a", "Manat√≠", "Tortuga carey"),
  # VALORES INVERTIDOS: Ahora un valor alto significa m√°s K.
  k_score = c(0.5, 1.5, 4.0, 4.5, 6.0, 7.5, 8.0), # Antes era r_score
  longevity = c(0.1, 2, 15, 10, 8, 60, 80),
  body_size = c(0.001, 0.3, 4, 0.5, 2, 400, 80),
  offspring = c(200, 40, 30, 4, 3, 1, 3)
)

ggplot(species_data, aes(x = reorder(species, k_score), y = k_score)) +
  geom_col(aes(fill = k_score), alpha = 0.8) +
  geom_text(aes(label = species), angle = 0, hjust = 1.1, vjust = 0.3, size = 3) +
  scale_fill_viridis_c(name = "Puntuaci√≥n\nK", option = "plasma") +
  coord_flip() +
  theme_minimal() +
  theme(legend.position = "right",
        plot.title = element_text(size = 14, face = "bold", hjust = 0.5),
        axis.text.y = element_blank()) +
  labs(title = "Continuo de Estrategias de Historia de Vida",
       subtitle = "De estrategia r (izquierda) a estrategia K (derecha)",
       x = "Especies", 
       # ETIQUETA DEL EJE Y CAMBIADA para reflejar correctamente la escala
       y = "Puntuaci√≥n de Selecci√≥n K (Valor alto = m√°s K)")
```

.box[
**üîç Observaci√≥n Clave:** La mayor√≠a de especies est√°n en posiciones **intermedias** del continuo, con diferentes combinaciones de rasgos seg√∫n presiones evolutivas espec√≠ficas.
]

---

class: inverse, center, middle

# ‚öîÔ∏è BLOQUE 2
# Competencia Inter e Intraespec√≠fica

---

# ü•ä Competencia: Definiciones y Tipos

## .blue[Conceptos Fundamentales]

.box[
**Competencia:** Interacci√≥n entre individuos que utilizan recursos limitados, resultando en reducci√≥n del fitness de al menos uno de los participantes.

**Caracter√≠sticas clave:**
- Recursos limitados en el ambiente
- Demanda supera la oferta
- Efecto negativo en crecimiento, supervivencia o reproducci√≥n
]

---
## Competencia (continuaci√≥n)

.pull-left[
### **Competencia Intraespec√≠fica**
- **Entre individuos** de la misma especie
- **Recursos id√©nticos** requeridos
- **M√°s intensa** por similitud de necesidades
- **Efecto denso-dependiente**
- **Autorregulaci√≥n poblacional**

### **Ejemplos:**
- Territorio en aves
- Sitios de anidaci√≥n
- Pareja reproductiva
- Espacio y alimento
]

.pull-right[
### **Competencia Interespec√≠fica**  
- **Entre especies diferentes**
- **Recursos parcialmente solapados**
- **Menos intensa** que intraespec√≠fica
- **Exclusi√≥n competitiva** posible
- **Coexistencia por partici√≥n**

### **Ejemplos:**
- Polinizadores por flores
- Depredadores por presas
- Plantas por luz/nutrientes
- Cavidades de anidaci√≥n
]

---
class: compact

# üîÑ Mecanismos de Competencia

## .blue[Tipos de Interacciones Competitivas]

.pull-left[
### **Competencia por Explotaci√≥n**
- **Uso eficiente** de recursos limitados
- **Sin contacto directo** entre competidores
- **"Quien llega primero"**
- **Agotamiento del recurso**

### **Caracter√≠sticas:**
- M√°s com√∫n en plantas
- Competencia por nutrientes
- Forrajeo eficiente
- Velocidad de crecimiento

### **Ejemplo: Palmas vs *Cecropia* **
- Ambas compiten por luz en claros
- *Cecropia* crece m√°s r√°pido
- Palmas m√°s eficientes a largo plazo
- Resultado depende del tama√±o del claro
]

.pull-right[
### **Competencia por Interferencia**
- **Interacciones directas** agresivas
- **Comportamiento territorial**
- **Defensa activa** de recursos
- **Exclusi√≥n f√≠sica**

### **Caracter√≠sticas:**
- Com√∫n en animales
- Comportamientos agresivos
- Marcaje territorial
- Jerarqu√≠as de dominancia

### **Ejemplo: Colibr√≠es en Jardines**
- *Anthracothorax* vs *Chlorostilbon*
- Defensa agresiva de flores
- Exclusi√≥n de territorios
- Coexistencia por partici√≥n temporal
]

---

```{r competition_mechanisms, fig.height=4}
# Gr√°fico conceptual de mecanismos de competencia
resource_time <- seq(0, 10, by = 0.1)

# Competencia por explotaci√≥n
exploitation_A <- 100 * exp(-0.3 * resource_time)
exploitation_B <- 100 * exp(-0.5 * resource_time)

# Competencia por interferencia (con eventos de exclusi√≥n)
interference_A <- ifelse(resource_time < 3, 80, ifelse(resource_time < 6, 40, 10))
interference_B <- ifelse(resource_time < 3, 60, ifelse(resource_time < 6, 90, 80))

comp_data <- data.frame(
  time = rep(resource_time, 4),
  resource = c(exploitation_A, exploitation_B, interference_A, interference_B),
  species = rep(c("Especie A", "Especie B"), each = length(resource_time), times = 2),
  mechanism = rep(c("Explotaci√≥n", "Interferencia"), each = 2 * length(resource_time))
)

ggplot(comp_data, aes(x = time, y = resource, color = species)) +
  geom_line(size = 1.5) +
  facet_wrap(~mechanism, ncol = 2) +
  scale_color_manual(values = c("#FF6B6B", "#4ECDC4")) +
  theme_minimal() +
  theme(legend.position = "bottom",
        legend.title = element_blank(),
        strip.text = element_text(size = 12, face = "bold"),
        plot.title = element_text(size = 13, face = "bold", hjust = 0.5)) +
  labs(title = "Mecanismos de Competencia por Recursos",
       x = "Tiempo", 
       y = "Disponibilidad de Recurso (%)")
```

---

# ‚öñÔ∏è Principio de Exclusi√≥n Competitiva (Gause)

## .blue[Ley de Gause (1934)]

.box[
**"Dos especies que compiten por recursos id√©nticos no pueden coexistir indefinidamente"**

### Predicciones:
- Una especie excluye competitivamente a la otra
- La especie "ganadora" tiene ventaja competitiva
- Coexistencia solo es posible con diferenciaci√≥n de nicho
]

---

```{r gause_principle, fig.height=4.5}
# Simulaci√≥n del experimento cl√°sico de Gause con Paramecium
time_days <- seq(0, 25, by = 1)

# *P. aurelia* sola (control)
aurelia_alone <- 100 / (1 + 99 * exp(-0.3 * time_days))

# *P. caudatum* sola (control)  
caudatum_alone <- 80 / (1 + 79 * exp(-0.25 * time_days))

# Competencia (P. aurelia gana)
aurelia_comp <- 60 / (1 + 59 * exp(-0.2 * time_days))
caudatum_comp <- pmax(0, 40 * exp(-0.1 * time_days) * (1 - aurelia_comp/60))

gause_data <- data.frame(
  day = rep(time_days, 4),
  population = c(aurelia_alone, caudatum_alone, aurelia_comp, caudatum_comp),
  species = rep(c("P. aurelia", "P. caudatum"), each = length(time_days), times = 2),
  treatment = rep(c("Monocultivo", "Competencia"), each = 2 * length(time_days))
)

ggplot(gause_data, aes(x = day, y = population, color = species, linetype = treatment)) +
  geom_line(size = 1.3) +
  scale_color_manual(values = c("#FF6B6B", "#4ECDC4")) +
  scale_linetype_manual(values = c("solid", "dotted")) +
  theme_minimal() +
  theme(legend.position = "bottom",
        plot.title = element_text(size = 13, face = "bold", hjust = 0.5)) +
  labs(title = "Experimento Cl√°sico de Gause: Exclusi√≥n Competitiva",
       subtitle = expression(italic("Paramecium aurelia") ~ "excluye a" ~ italic("P. caudatum") ~ "en competencia"),
       x = "D√≠as", 
       y = "Densidad Poblacional",
       color = "Especies",
       linetype = "Tratamiento")
```

---

# ü§ù Coexistencia: Escape de la Exclusi√≥n

## .blue[Mecanismos de Coexistencia]

.pull-left[
### **Partici√≥n de Recursos**
- **Divisi√≥n espacial:** Diferentes microh√°bitats
- **Divisi√≥n temporal:** Actividad en horarios distintos
- **Divisi√≥n tr√≥fica:** Dietas especializadas
- **Diferenciaci√≥n morfol√≥gica**

### **Ejemplo: *Anolis* Dominicanos**
- ** *A. cybotes*:** Troncos bajos, crepuscular
- ** *A. coelestinus*:** Canopeo alto, diurno  
- ** *A. chlorocyanus*:** Sotobosque, matutino
- **Coexistencia:** Por partici√≥n vertical y temporal
]

.pull-right[
### **Facilitaci√≥n**
- **Modificaci√≥n positiva** del ambiente
- **Reducci√≥n de estr√©s** abi√≥tico
- **Creaci√≥n de microh√°bitats**
- **Sucesi√≥n facilitada**

### **Ejemplo: Manglares de Montecristi**
- ** *Rhizophora* ** establece primer colonizaci√≥n
- **Reduce salinidad** del sustrato
- **Facilita entrada** de *Avicennia* y *Laguncularia*
- **Coexistencia:** Por facilitaci√≥n sucesional
]

---

```{r coexistence_mechanisms, fig.height=4}
# Gr√°fico de nicho multidimensional
set.seed(123)
n_points <- 50

# Especie A - nicho en dimensi√≥n X-Y
species_A_x <- rnorm(n_points, 3, 1)
species_A_y <- rnorm(n_points, 3, 1)

# Especie B - nicho en dimensi√≥n X-Z (partici√≥n)
species_B_x <- rnorm(n_points, 5, 1)
species_B_y <- rnorm(n_points, 5, 1)

coexist_data <- data.frame(
  x = c(species_A_x, species_B_x),
  y = c(species_A_y, species_B_y),
  species = rep(c("Especie A", "Especie B"), each = n_points)
)

ggplot(coexist_data, aes(x = x, y = y, color = species)) +
  geom_point(alpha = 0.7, size = 2) +
  stat_ellipse(level = 0.9, size = 1.2) +
  scale_color_manual(values = c("#FF6B6B", "#4ECDC4")) +
  theme_minimal() +
  theme(legend.position = "bottom",
        legend.title = element_blank(),
        plot.title = element_text(size = 13, face = "bold", hjust = 0.5)) +
  labs(title = "Coexistencia por Partici√≥n de Nicho",
       subtitle = "Especies ocupan diferentes regiones del espacio de recursos",
       x = "Dimensi√≥n de Nicho 1 (ej: tama√±o de presa)",
       y = "Dimensi√≥n de Nicho 2 (ej: altura de forrajeo)")
```

---
class: inverse, center, middle

# ü¶Å BLOQUE 3
# Depredaci√≥n y Otras Interacciones

---

# üéØ Modelo Lotka-Volterra: Depredador-Presa

## .blue[Ecuaciones Fundamentales]

.equation[
**Presa:** dN/dt = rN - aNP

**Depredador:** dP/dt = eaNP - mP

Donde:
- **N** = Poblaci√≥n de presas
- **P** = Poblaci√≥n de depredadores  
- **r** = Tasa intr√≠nseca de crecimiento de presas
- **a** = Tasa de ataque del depredador
- **e** = Eficiencia de conversi√≥n
- **m** = Mortalidad del depredador
]

---

```{r lotka_volterra2, fig.height=5}
# Simulaci√≥n del modelo Lotka-Volterra
library(deSolve)

# Par√°metros del modelo
parms <- c(r = 0.1, a = 0.01, e = 0.02, m = 0.1)

# Funci√≥n del sistema de ecuaciones
lotka_volterra <- function(t, state, parms) {
  with(as.list(c(state, parms)), {
    dN <- r*N - a*N*P
    dP <- e*a*N*P - m*P
    list(c(dN, dP))
  })
}

# Condiciones iniciales
state <- c(N = 50, P = 10)
times <- seq(0, 50, by = 0.1)

# Resolver las ecuaciones
lv_solution <- ode(y = state, times = times, func = lotka_volterra, parms = parms)
lv_df <- as.data.frame(lv_solution)

# Convertir a formato largo para ggplot
lv_long <- reshape2::melt(lv_df, id.vars = "time", variable.name = "species", value.name = "population")
lv_long$species <- factor(lv_long$species, levels = c("N", "P"), labels = c("Presas", "Depredadores"))

ggplot(lv_long, aes(x = time, y = population, color = species)) +
  geom_line(size = 1.5) +
  scale_color_manual(values = c("#4ECDC4", "#FF6B6B")) +
  theme_minimal() +
  theme(legend.position = "top",
        legend.title = element_blank(),
        plot.title = element_text(size = 14, face = "bold", hjust = 0.5)) +
  labs(title = "Modelo Lotka-Volterra: Depredador-Presa",
       subtitle = "Din√°micas c√≠clicas en poblaciones interactuantes",
       x = "Tiempo", 
       y = "Tama√±o Poblacional")
```

---

```{r lotka_volterra, fig.height=5}
# Simulaci√≥n del modelo Lotka-Volterra
library(deSolve)
library(ggplot2)
library(reshape2)

# Par√°metros del modelo AJUSTADOS para oscilaciones
parms <- c(r = 1.0,    # Tasa de crecimiento de presas (aumentada)
           a = 0.1,    # Tasa de depredaci√≥n (aumentada)
           e = 0.075,  # Eficiencia de conversi√≥n (ajustada)
           m = 0.5)    # Tasa de mortalidad de depredadores (aumentada)

# Funci√≥n del sistema de ecuaciones
lotka_volterra <- function(t, state, parms) {
  with(as.list(c(state, parms)), {
    dN <- r*N - a*N*P
    dP <- e*a*N*P - m*P
    list(c(dN, dP))
  })
}

# Condiciones iniciales (m√°s desbalanceadas para ver oscilaci√≥n)
state <- c(N = 15, P = 5)  # Menos presas, m√°s depredadores iniciales
times <- seq(0, 50, by = 0.1)

# Resolver las ecuaciones
lv_solution <- ode(y = state, times = times, func = lotka_volterra, parms = parms)
lv_df <- as.data.frame(lv_solution)

# Convertir a formato largo para ggplot
lv_long <- reshape2::melt(lv_df, id.vars = "time", variable.name = "species", value.name = "population")
lv_long$species <- factor(lv_long$species, levels = c("N", "P"), labels = c("Presas", "Depredadores"))

ggplot(lv_long, aes(x = time, y = population, color = species)) +
  geom_line(size = 1.2, alpha = 0.8) +
  scale_color_manual(values = c("#4ECDC4", "#FF6B6B")) +
  theme_minimal() +
  theme(legend.position = "top",
        legend.title = element_blank(),
        plot.title = element_text(size = 14, face = "bold", hjust = 0.5)) +
  labs(title = "Modelo Lotka-Volterra: Oscilaciones Depredador-Presa",
       subtitle = "Din√°micas c√≠clicas en poblaciones interactuantes",
       x = "Tiempo", 
       y = "Tama√±o Poblacional") +
  # A√±adir una gu√≠a para ayudar a visualizar el desfase
  geom_hline(yintercept = mean(lv_df$N), linetype = "dashed", color = "#4ECDC4", alpha = 0.5) +
  geom_hline(yintercept = mean(lv_df$P), linetype = "dashed", color = "#FF6B6B", alpha = 0.5)
```
  
---
class: compact

.small[

# üîÑ Fases del Ciclo Depredador-Presa

## .blue[Secuencia Temporal de Eventos]

.pull-left[
### **Fase 1: Abundancia de Presas**
- **Presas abundantes** ‚Üí Crecimiento exponencial
- **Depredadores escasos** ‚Üí Baja presi√≥n de depredaci√≥n
- **Resultado:** Poblaci√≥n de presas aumenta

### **Fase 2: Crecimiento de Depredadores**  
- **Alimento abundante** ‚Üí Reproducci√≥n exitosa
- **Baja mortalidad** de depredadores
- **Resultado:** Poblaci√≥n de depredadores aumenta

### **Fase 3: Declive de Presas**
- **Alta presi√≥n** de depredaci√≥n
- **Mortalidad supera** natalidad
- **Resultado:** Poblaci√≥n de presas disminuye
]

.pull-right[
### **Fase 4: Declive de Depredadores**
- **Escasez de alimento** ‚Üí Baja reproducci√≥n
- **Alta mortalidad** por inanici√≥n
- **Resultado:** Poblaci√≥n de depredadores disminuye

### **Retorno a Fase 1**
- **Liberaci√≥n** de presi√≥n sobre presas
- **Inicio** de nuevo ciclo
- **Oscilaciones continuas**

### **Desfase Temporal**
- Picos de depredadores **siguen** a picos de presas
- Per√≠odo t√≠pico: 3-10 a√±os
- Amplitud depende de par√°metros del sistema
]

.box[
### üîç **Ejemplo: Liebre vs Lince en Canad√° (Datos Hist√≥ricos)**
Registros de pieles (1845-1935) muestran ciclos de ~10 a√±os con desfase de 1-2 a√±os entre picos de liebre
]
]